{"swagger":"2.0","info":{"title":"Supabase Storage API","description":"API documentation for Supabase Storage","version":"0.0.1"},"definitions":{"def-0":{"type":"object","properties":{"authorization":{"type":"string"}},"required":["authorization"]},"def-1":{"type":"object","properties":{"statusCode":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"}},"required":["statusCode","error","message"]}},"paths":{"/bucket/":{"post":{"summary":"Create a bucket","tags":["bucket"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"name":{"type":"string","example":"avatars"},"id":{"type":"string","example":"avatars"},"public":{"type":"boolean","example":false}},"required":["name"]}},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"name":{"type":"string","example":"avatars"}},"required":["name"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"get":{"summary":"Gets all buckets","tags":["bucket"],"parameters":[{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"array","items":{"$id":"bucketSchema","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"owner":{"type":"string"},"public":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","name"],"additionalProperties":false,"example":{"id":"bucket2","name":"bucket2","owner":"4d56e902-f0a0-4662-8448-a4d9e643c142","created_at":"2021-02-17T04:43:32.770206+00:00","updated_at":"2021-02-17T04:43:32.770206+00:00"}},"example":[{"id":"bucket2","name":"bucket2","owner":"4d56e902-f0a0-4662-8448-a4d9e643c142","created_at":"2021-02-17T04:43:32.770206+00:00","updated_at":"2021-02-17T04:43:32.770206+00:00"}]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/bucket/{bucketId}":{"delete":{"summary":"Delete a bucket","tags":["bucket"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketId"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"message":{"type":"string","example":"Successfully deleted"}}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"get":{"summary":"Get details of a bucket","tags":["bucket"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketId"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"$id":"todo.com","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"owner":{"type":"string"},"public":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","name"],"additionalProperties":false,"example":{"id":"bucket2","name":"bucket2","owner":"4d56e902-f0a0-4662-8448-a4d9e643c142","created_at":"2021-02-17T04:43:32.770206+00:00","updated_at":"2021-02-17T04:43:32.770206+00:00"}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/bucket/{bucketId}/empty":{"post":{"summary":"Empty a bucket","tags":["bucket"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketId"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"message":{"type":"string","example":"Successfully emptied"}}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/copy":{"post":{"summary":"Copies an object","tags":["object"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"sourceKey":{"type":"string","example":"folder/source.png"},"bucketId":{"type":"string","example":"avatars"},"destinationKey":{"type":"string","example":"folder/destination.png"}},"required":["sourceKey","bucketId","destinationKey"]}},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"Key":{"type":"string","example":"folder/destination.png"}},"required":["Key"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/{bucketName}/*":{"post":{"summary":"Upload a new object","tags":["object"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"Key":{"type":"string","example":"projectref/avatars/folder/cat.png"}},"required":["Key"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"delete":{"summary":"Delete an object","tags":["object"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"message":{"type":"string","example":"Successfully deleted"}}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"get":{"summary":"Retrieve an object","tags":["object"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"put":{"summary":"Update the object at an existing key","tags":["object"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"Key":{"type":"string","example":"projectref/avatars/folder/cat.png"}},"required":["Key"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/{bucketName}":{"delete":{"summary":"Delete multiple objects","tags":["object"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"prefixes":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":1000,"example":["folder/cat.png","folder/morecats.png"]}},"required":["prefixes"]}},{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"array","items":{"$id":"objectSchema","type":"object","properties":{"name":{"type":"string"},"bucket_id":{"type":"string"},"owner":{"type":"string"},"id":{"anyOf":[{"type":"string"},{"type":"null"}]},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"last_accessed_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"metadata":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}]},"buckets":{"$id":"bucketSchema","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"owner":{"type":"string"},"public":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","name"],"additionalProperties":false,"example":{"id":"bucket2","name":"bucket2","owner":"4d56e902-f0a0-4662-8448-a4d9e643c142","created_at":"2021-02-17T04:43:32.770206+00:00","updated_at":"2021-02-17T04:43:32.770206+00:00"}}},"required":["name"],"additionalProperties":false,"example":{"name":"folder/cat.png","bucket_id":"avatars","owner":"317eadce-631a-4429-a0bb-f19a7a517b4a","id":"eaa8bdb5-2e00-4767-b5a9-d2502efe2196","updated_at":"2021-04-06T16:30:35.394674+00:00","created_at":"2021-04-06T16:30:35.394674+00:00","last_accessed_at":"2021-04-06T16:30:35.394674+00:00","metadata":{"size":1234}}}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/sign/{bucketName}/*":{"get":{"summary":"Retrieve an object via a presigned URL","tags":["object"],"parameters":[{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJidWNrZXQyL3B1YmxpYy9zYWRjYXQtdXBsb2FkMjMucG5nIiwiaWF0IjoxNjE3NzI2MjczLCJleHAiOjE2MTc3MjcyNzN9.uBQcXzuvXxfw-9WgzWMBfE_nR3VOgpvfZe032sfLSSk","required":true,"in":"query","name":"token"},{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"}],"responses":{"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}},"post":{"summary":"Generate a presigned url to retrieve an object","tags":["object"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"expiresIn":{"type":"integer","minimum":1,"example":60000}},"required":["expiresIn"]}},{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"signedURL":{"type":"string","example":"/object/sign/avatars/folder/cat.png?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJhdmF0YXJzL2ZvbGRlci9jYXQucG5nIiwiaWF0IjoxNjE3NzI2MjczLCJleHAiOjE2MTc3MjcyNzN9.s7Gt8ME80iREVxPhH01ZNv8oUn4XtaWsmiQ5csiUHn4"}},"required":["signedURL"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/public/{bucketName}/*":{"get":{"summary":"Retrieve an object","tags":["object"],"parameters":[{"type":"string","example":"avatars","required":true,"in":"path","name":"bucketName"},{"type":"string","example":"folder/cat.png","required":true,"in":"path","name":"*"}],"responses":{"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/move":{"post":{"summary":"Moves an object","tags":["object"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"bucketId":{"type":"string","example":"avatars"},"sourceKey":{"type":"string","example":"folder/cat.png"},"destinationKey":{"type":"string","example":"folder/newcat.png"}},"required":["bucketId","sourceKey","destinationKey"]}},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"object","properties":{"message":{"type":"string","example":"Successfully moved"}},"required":["message"]}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}},"/object/list/{bucketName}":{"post":{"summary":"Search for objects under a prefix","tags":["object"],"parameters":[{"name":"body","in":"body","schema":{"type":"object","properties":{"prefix":{"type":"string","example":"folder/subfolder"},"limit":{"type":"integer","minimum":1,"example":10},"offset":{"type":"integer","minimum":0,"example":0},"sortBy":{"type":"object","properties":{"column":{"type":"string","enum":["name","updated_at","created_at","last_accessed_at"]},"order":{"type":"string","enum":["asc","desc"]}},"required":["column"]}},"required":["prefix"]}},{"type":"string","required":true,"in":"path","name":"bucketName"},{"in":"header","name":"authorization","required":true,"type":"string"}],"responses":{"200":{"description":"Default Response","schema":{"type":"array","items":{"$id":"objectSchema","type":"object","properties":{"name":{"type":"string"},"bucket_id":{"type":"string"},"owner":{"type":"string"},"id":{"anyOf":[{"type":"string"},{"type":"null"}]},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"last_accessed_at":{"anyOf":[{"type":"string"},{"type":"null"}]},"metadata":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}]},"buckets":{"$id":"bucketSchema","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"owner":{"type":"string"},"public":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["id","name"],"additionalProperties":false,"example":{"id":"bucket2","name":"bucket2","owner":"4d56e902-f0a0-4662-8448-a4d9e643c142","created_at":"2021-02-17T04:43:32.770206+00:00","updated_at":"2021-02-17T04:43:32.770206+00:00"}}},"required":["name"],"additionalProperties":false,"example":{"name":"folder/cat.png","bucket_id":"avatars","owner":"317eadce-631a-4429-a0bb-f19a7a517b4a","id":"eaa8bdb5-2e00-4767-b5a9-d2502efe2196","updated_at":"2021-04-06T16:30:35.394674+00:00","created_at":"2021-04-06T16:30:35.394674+00:00","last_accessed_at":"2021-04-06T16:30:35.394674+00:00","metadata":{"size":1234}}}}},"400":{"description":"Default Response","schema":{"$ref":"#/definitions/def-1"}}}}}},"tags":[{"name":"object","description":"Object end-points"},{"name":"bucket","description":"Bucket end-points"}]}